<link rel="stylesheet" href="/static/css/post.css">

    <div id="container">

      <button id="back-to-feed" onclick="history.back()">‚¨ÖÔ∏è Back to Feed</button>

      <!-- Single Post -->
      {{> individual_post hideCommentButton=true unicoPost=true}}

      <!-- Comments Section -->
      <div id="comments-section">
        <h2>Comments</h2>
        {{#if comments}}
        {{#each comments}}
        <!-- Existing Comment -->
        <div class="comment">
          {{#if is_own}}<button class="delete-comment-button" onclick="deleteComment('{{comment_id}}')">üóë</button>{{/if}}
          <div class="comment-user">
            <a href="{{username_comment}}/profile"><strong>@{{username_comment}}</strong></a>:
          </div>
          <div class="comment-content">
            {{content}}
          </div>
        </div>

        {{/each}}
        {{else}}
        <p>No comments yet. Add one yourself!</p>
        {{/if}}
        {{#if loggedIn}}
        <!-- New Comment Form -->
        <form id="new-comment-form" action="/post/{{post_id}}/comment" method="post">
          <textarea name="comment-content" placeholder="Add a comment..." required></textarea>
          <button type="submit">Post Comment</button>
        </form>
        {{/if}}
    </div>
  </div>

<script>
  function deleteComment(comment_id) {
    fetch(`/post/{{post_id}}/comment/${comment_id}`, {
      method: 'DELETE',
    }).then((response) => {
      if (response.ok)
        window.location.reload();
      else 
        response.text().then((text) => 
          alert(`Error: ${text}`)
        );
    }).catch((error) => {
      console.error('Error:', error);
    });
  }
</script>


<script src="/static/js/updateLikes.js" type="text/javascript"></script>
<script src="/static/js/like.js" type="text/javascript" event_listener_location="container"></script>
