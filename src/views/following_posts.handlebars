<link rel="stylesheet" href="/static/css/style_prototype.css">
<div id="navbar">
  <div id="logo"><a href="/">Better Reads</a></div>
  <div class="user-actions">
    {{#if loggedIn}}
    <a href="/logout">Logout</a>
    <a href="/profile">Hello, {{username}}</a>
    {{else}}
    <a href="/login">Login</a>
    <a href="/register">Register</a>
    {{/if}}
  </div>
</div>

<div id="main-layout">
  <!-- Left sidebar -->
  <div id="sidebar">
    {{#if book}}
    <a href="/book/{{book.id}}"><button id="goBackButton">Go back to book</button></a>
    <div id="book-info">
      <img src="{{book.cover_url}}" alt="Book cover" id="book-cover">
      <h2>{{book.title}}</h2>
    </div>
    {{else}}
    <ul>
      <li><a href="/profile">My User</a></li>
      <li><a href="/browse">Browse</a></li>
      <li><a href="/my-reviews">My Books</a></li>
      <li><a href="/following-posts">Following</a></li>
      <li><a href="/settings">Settings</a></li>
    </ul>
    {{/if}}
  </div>

  <!-- Feed content -->
  <div id="container">
    <div id="feed">
      {{#if posts}}
      {{#each posts}}
      <div class="post" post-id="{{post_id}}">
        <div class="user-info">
            {{#if repost_username}}<strong style="color: gray;">@{{repost_username}} ‚•Ç</strong> {{/if}}<strong>@{{username}}</strong> on <a href="book/{{book_id}}" class="topic-link"><em>{{book_name}}</em></a>
          </div>
        <div class="review">
          {{content}}
        </div>
        <div class="post-actions">
          <div style="display: flex; align-items: center;">
            <a href="#" class="like-button"><span class="like-counter" style="margin-right: 8px;">ü§ç ?</span></a>
            <a href="#" class="repost-button"><span class="repost-counter" style="margin-right: 8px;">üîÅ ?</span></a>
            <span class="comment-counter" style="margin-right: 8px;">üì© ?</span>
          </div>
          <a href="/post/{{post_id}}">Comments</a>
        </div>
      </div>
      {{/each}}
      {{#if has_more}}
       <a href="/following-posts?offset={{posts.length}}">Load more posts</a>
      {{else}}
      <p>You have reached the bottom! There are no more older posts</p>
      {{/if}}
      {{else}}
      <p>No posts yet</p>
      {{/if}}
    </div>
    </div>

  <script src="/static/js/updateLikes.js" type="text/javascript"></script>
  <script src="/static/js/like.js" type="text/javascript" event_listener_location="feed"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
</div>
